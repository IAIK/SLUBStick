CC := gcc

SOURCES := $(wildcard *.c)

TARGETS := $(SOURCES:.c=.elf)

CFLAGS += -g
CFLAGS += -O2
CFLAGS += -static
CFLAGS += -Wall
CFLAGS += -Wextra
CFLAGS += -Wno-int-to-pointer-cast
CFLAGS += -Wno-pointer-to-int-cast
CFLAGS += -I/usr/include/fuse
CFLAGS += -I../include
CFLAGS += -lfuse
CFLAGS += -lkeyutils
CFLAGS += -pthread
CFLAGS += -D_FILE_OFFSET_BITS=64

all: $(TARGETS)

%.elf: %.c
	$(CC) -D_FILE_OFFSET_BITS=64 $< $(CFLAGS) -o $@

clean:
	rm -f *.elf
